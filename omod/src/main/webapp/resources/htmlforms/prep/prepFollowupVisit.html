<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.
  -->
<htmlform>
    <script type="text/javascript" src="../moduleResources/kenyaemr/scripts/moment.js"></script>
    <style>
        .simple-table {
            border: solid 1px #DDEEEE;
            border-collapse: collapse;
            border-spacing: 0;
            font: normal 13px Arial, sans-serif;
        }

        .simple-table thead th {
            background-color: #DDEFEF;
            border: solid 1px #DDEEEE;
            color: #336B6B;
            padding: 10px;
            text-align: left;
            text-shadow: 1px 1px 1px #fff;
        }

        .simple-table td {
            border: solid 1px #DDEEEE;
            color: #333;
            padding: 10px;
            text-shadow: 1px 1px 1px #fff;
        }
    </style>

    <script type="text/javascript">
        jQuery(function ($) {
            //onReady
            jq("#sti-symptoms input[type=checkbox]").prop("disabled",true);
            jq("#sti-treated input[type=radio]").prop("disabled",true);
            jq('#sti_screened :input[type=radio]').change(onStiScreenedSelected);

            beforeSubmit.push(function () {
            });

        })

        function onStiScreenedSelected() {
            var val = jq(this).val();
            var stiSymptomsChecked = jq("#sti-symptoms input:checkbox:checked");
            var stiTreated = jq('#sti-treated');
            if(val == 1065){
                jq("#sti-symptoms input[type=checkbox]").prop("disabled",false);
                jq("#sti-treated input[type=radio]").prop("disabled",false);
                jq(this).prop("disabled",false);

            } else{
                jq("#sti-symptoms input[type=checkbox]").prop("disabled", true);
                jq("#sti-symptoms input[type=checkbox]").prop("checked", false);
                clearHiddenSections([stiTreated]);

            }
        }

        clearHiddenSections = function(parentObj) {
            for(var i=0; i &lt; parentObj.length; i++){
                parentObj[i].find('input[type=radio]').each(function() {
                    this.checked = false;
                });
                parentObj[i].find('input[type=checkbox]').each(function() {
                    this.checked = false;
                });
                parentObj[i].find('input[type=text]').each(function() {
                    this.value = "";
                });
                parentObj[i].find('select').each(function() {
                    this.selectedIndex =0;
                });
            }
        }

    </script>

    <div class="ke-form-header">
        <table width="100%">
            <tr>
                <td>Date:
                    <encounterDate id="encounter-date" showTime="true"/>
                </td>
                <td>Location:
                    <encounterLocation default="GlobalProperty:kenyaemr.defaultLocation" type="autocomplete"/>
                </td>
            </tr>
        </table>
    </div>

    <div class="ke-form-content">
        <!--Prep encounter form-->
        <fieldset>
            <legend>STI Screening</legend>
            <table class="simple-table">
                <tr>
                    <td> <b>Screening done</b> </td>
                    <td> <b>Signs / Symptoms</b> </td>
                    <td> <b>Treated</b> </td>
                </tr>
                <tr>
                   <td> <obs id="sti_screened" conceptId="161558" required="true" style="radio" answerConceptIds="1065,1066" /> </td>
                    <td>
                        <div id="sti-symptoms" style="float: left; padding-right: 50px">
                        <obs conceptId="165098"
                             answerConceptId="145762AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerLabel="Genital Ulcer Desease(GUD)" style="checkbox" />
                        <br />
                        <obs conceptId="165098"
                             answerConceptId="121809AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerLabel="Vaginitis and/or Vaginal Discharge(VG)" style="checkbox"/>
                        <br />
                        <obs conceptId="165098"
                             answerConceptId="116995AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerLabel="Cervicitis and/or Cervical Discharge(CD)" style="checkbox"/>
                       <br />
                        <obs conceptId="165098"
                             answerConceptId="130644AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerLabel="Pelvic Inflammatory Desease(PID)" style="checkbox"/>
                        <br />
                        <obs conceptId="165098"
                             answerConceptId="123529AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerLabel="Urethral Discharge(UD)" style="checkbox"/>
                        <br />
                        <obs conceptId="165098"
                             answerConceptId="148895AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerLabel="Anal Discharge(AD)" style="checkbox"/>
                        <br />
                        <obs conceptId="165098"
                             answerConceptId="5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerLabel="Other(O)"
                             style="checkbox"/>
                        <br />
                     </div>
                    </td>
                   <td> <obs id="sti-treated" conceptId="165200" style="radio" answerConceptIds="1065,1066" /> </td>
                  </tr>
            </table>
        </fieldset>
    </div>
    <div class="ke-form-footer">
        <submit/>
    </div>

</htmlform>